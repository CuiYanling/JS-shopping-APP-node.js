(function(t){function e(e){for(var s,i,l=e[0],n=e[1],c=e[2],u=0,m=[];u<l.length;u++)i=l[u],o[i]&&m.push(o[i][0]),o[i]=0;for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s]);d&&d(e);while(m.length)m.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,l=1;l<a.length;l++){var n=a[l];0!==o[n]&&(s=!1)}s&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},o={app:0},r=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/admin/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],n=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var d=n;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0252":function(t,e,a){"use strict";var s=a("d3af"),o=a.n(s);o.a},"158f":function(t,e,a){"use strict";var s=a("f2c0"),o=a.n(s);o.a},"1c3b":function(t,e,a){"use strict";var s=a("7ba1"),o=a.n(s);o.a},"1ef6":function(t,e,a){},"228d":function(t,e,a){},"2a56":function(t,e,a){},"37e6":function(t,e,a){"use strict";var s=a("c79a"),o=a.n(s);o.a},"39f7":function(t,e,a){"use strict";var s=a("1ef6"),o=a.n(s);o.a},"3ab6":function(t,e,a){"use strict";var s=a("9630"),o=a.n(s);o.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("router-view")],1)},r=[],i={},l=i,n=(a("5c0b"),a("2877")),c=Object(n["a"])(l,o,r,!1,null,null,null),d=c.exports,u=a("8c4f"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg"},[a("div",{staticClass:"form-box"},[a("form",{attrs:{action:""}},[a("div",{staticClass:"title"},[t._v("欢迎登陆")]),a("div",{staticClass:"body"},[a("div",{staticClass:"form-control",class:{error:!t.valid[0]}},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.username,expression:"formData.username"}],staticClass:"input-control",attrs:{type:"text",placeholder:"请输入账户名"},domProps:{value:t.formData.username},on:{blur:t.checkUsername,input:function(e){e.target.composing||t.$set(t.formData,"username",e.target.value)}}})]),a("div",{staticClass:"form-control",class:{error:!t.valid[1]}},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"input-control",attrs:{type:"password",pattern:"[1-9]\\d{6,}",placeholder:"请输入密码"},domProps:{value:t.formData.password},on:{blur:t.checkPassword,input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}})]),a("div",{staticClass:"form-control"},[a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:t.regHandle}},[t._v("登 录")])]),a("div",{staticClass:"link-box"},[a("router-link",{attrs:{to:"/register"}},[t._v("注册账户")]),a("router-link",{attrs:{to:"/register"}},[t._v("忘记密码？")])],1)])])])])},p=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-on"},[a("i",{staticClass:"fa fa-user"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-on"},[a("i",{staticClass:"fa fa-lock"})])}],f=a("cebc"),v={props:["redirect"],data:function(){return{formData:{username:"",password:""},valid:[!0,!0]}},methods:{checkUsername:function(){var t=/[A-Za-z0-9_-]{5,}/,e=t.test(this.formData.username);return this.$set(this.valid,0,e),e},checkPassword:function(){var t=/\d{6,}/,e=t.test(this.formData.password);return this.$set(this.valid,1,e),e},regHandle:function(){var t=this,e=this.checkUsername()&&this.checkPassword();e&&this.$store.dispatch("Login",Object(f["a"])({},this.formData)).then(function(e){sessionStorage.token=e.data.token,sessionStorage.uid=e.data.id,sessionStorage.role=e.data.role,t.$message({message:e.msg,type:"success",duration:1e3,onClose:function(){t.redirect?t.$router.push(t.redirect):t.$router.push("/index")}})}).catch(function(e){t.$message.error(e.msg)})}}},b=v,h=(a("158f"),Object(n["a"])(b,m,p,!1,null,"0c522746",null)),g=h.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg"},[a("div",{staticClass:"form-box"},[a("form",{attrs:{action:""}},[a("div",{staticClass:"title"},[t._v("注册新账户")]),a("div",{staticClass:"body"},[a("div",{staticClass:"form-control"},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.username,expression:"formData.username"}],staticClass:"input-control",attrs:{type:"text",placeholder:"请输入账户名"},domProps:{value:t.formData.username},on:{input:function(e){e.target.composing||t.$set(t.formData,"username",e.target.value)}}})]),a("div",{staticClass:"form-control"},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"input-control",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.formData.password},on:{input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}})]),a("div",{staticClass:"form-control"},[t._m(2),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.nickname,expression:"formData.nickname"}],staticClass:"input-control",attrs:{type:"text",placeholder:"请输入昵称"},domProps:{value:t.formData.nickname},on:{input:function(e){e.target.composing||t.$set(t.formData,"nickname",e.target.value)}}})]),a("div",{staticClass:"form-control"},[t._m(3),a("div",{staticClass:"sex-box"},[a("label",{attrs:{for:"man"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.sex,expression:"formData.sex"}],attrs:{checked:"",name:"sex",value:"男",id:"man",type:"radio"},domProps:{checked:t._q(t.formData.sex,"男")},on:{change:function(e){return t.$set(t.formData,"sex","男")}}}),a("i",{staticClass:"fa fa-mars"}),t._v("\n\t\t\t\t\t\t\t男\n\t\t\t\t\t\t")]),a("label",{attrs:{for:"woman"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.sex,expression:"formData.sex"}],attrs:{id:"woman",name:"sex",value:"女",type:"radio"},domProps:{checked:t._q(t.formData.sex,"女")},on:{change:function(e){return t.$set(t.formData,"sex","女")}}}),a("i",{staticClass:"fa fa-venus"}),t._v("\n\t\t\t\t\t\t\t女\n\t\t\t\t\t\t")])])]),a("div",{staticClass:"form-control"},[t._m(4),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.tel,expression:"formData.tel"}],staticClass:"input-control",attrs:{type:"number",placeholder:"请输入手机号码"},domProps:{value:t.formData.tel},on:{input:function(e){e.target.composing||t.$set(t.formData,"tel",e.target.value)}}})]),a("div",{staticClass:"form-control"},[a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:t.regHandle}},[t._v("注 册")])]),a("div",{staticClass:"link-box"},[a("router-link",{attrs:{to:"/login"}},[t._v("密码登录")]),a("router-link",{attrs:{to:"/register"}},[t._v("忘记密码？")])],1)])])])])},C=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-on"},[a("i",{staticClass:"fa fa-user"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-on"},[a("i",{staticClass:"fa fa-lock"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-on"},[a("i",{staticClass:"fa fa-tag"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-on"},[a("i",{staticClass:"fa fa-venus-mars"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-on"},[a("i",{staticClass:"fa fa-mobile"})])}],x={data:function(){return{formData:{username:"",password:"",nickname:"",sex:"",tel:""}}},methods:{regHandle:function(){var t=this;this.$http.post("/api/user/register",Object(f["a"])({},this.formData)).then(function(e){if(!e.status)return t.$message.error(e.msg),!1;sessionStorage.token=e.data.token,sessionStorage.uid=e.data.id,t.$message({message:e.msg,type:"success",duration:1e3,onClose:function(){t.$router.push("/index")}})})}}},y=x,k=(a("39f7"),Object(n["a"])(y,_,C,!1,null,"79aa99ff",null)),w=k.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"clearfix am-margin-bottom-lg"},[t._m(0),a("div",{staticClass:"pull-right"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("用户管理")])],1)],1)]),a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"手机号码"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"}},[t._v("查询")])],1)],1),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"tooltip-effect":"dark",data:t.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"#"}}),a("el-table-column",{attrs:{sortable:"",label:"头像"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.avatar,width:"60",alt:""}})]}}])}),a("el-table-column",{attrs:{prop:"username",sortable:"",label:"账号"}}),a("el-table-column",{attrs:{prop:"nickname",sortable:"",label:"昵称"}}),a("el-table-column",{attrs:{prop:"sex",sortable:"",label:"性别",width:"120"}}),a("el-table-column",{attrs:{prop:"tel",sortable:"",label:"手机号码"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit",size:"small"}}),a("el-button",{attrs:{icon:"el-icon-delete",type:"danger",plain:"",size:"small"}})]}}])})],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:120}})],1)},E=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pull-left"},[a("h3",{staticClass:"title"},[t._v("客户列表")])])}],P={name:"list",data:function(){return{tableData:[],form:{name:"",sex:"",age:0,birthday:"",address:""}}},created:function(){this.loadList()},methods:{loadList:function(t){var e=this;this.$http.get("/api/user/list").then(function(t){t.status&&(e.tableData=t.data)})},handleEdit:function(t,e){this.editing=!0,this.form=e},handleDelete:function(t,e){this.confirmVisible=!0,console.log(t,e)}}},S=P,D=(a("3ab6"),Object(n["a"])(S,$,E,!1,null,"ec3d4c3a",null)),M=D.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[s("el-table-column",{attrs:{fixed:"",label:"商品名称",width:"450"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"goods"},[s("div",{staticClass:"img"},[s("img",{attrs:{src:a("cf05")}})]),s("div",{staticClass:"name"},[s("span",[t._v(t._s(e.row.name))]),s("br"),s("span",[t._v("商品货号："+t._s(e.row.articleNo))])])])]}}])}),s("el-table-column",{attrs:{prop:"price",label:"价格",width:"120"}}),s("el-table-column",{attrs:{prop:"quantity",label:"数量",width:"120"}}),s("el-table-column",{attrs:{prop:"create_time",label:"下单时间",width:"180"}}),s("el-table-column",{attrs:{prop:"status",label:"状态"}}),s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("router-link",{attrs:{to:{name:"GoodsEdit",params:{id:e.row.id}}}},[s("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit",size:"small"}})],1),s("el-button",{attrs:{icon:"el-icon-delete",type:"danger",plain:"",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),t.deleteRow(e.row.id)}}})]}}])})],1),s("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("span",[t._v("确定要删除该商品吗？删除之后无法恢复！！！")]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)])],1)},O=[],V=(a("6c7b"),{data:function(){var t={name:"老板抽油烟机",articleNo:1564894454,price:16322,quantity:1,create_time:"2019-03-28",status:"已付款"};return{dialogVisible:!1,tableData:Array(10).fill(t)}},created:function(){},methods:{}}),N=V,A=(a("1c3b"),Object(n["a"])(N,j,O,!1,null,"44100384",null)),I=A.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"container"},[a("el-header",[a("HeaderBar")],1),a("el-container",[a("LeftMenu"),a("el-main",[a("router-view")],1)],1)],1)},F=[],H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"clearfix"},[s("img",{staticClass:"am-text-middle",attrs:{src:a("d742"),height:"40"}}),s("i",{staticClass:"el-icon-menu am-text-middle am-margin-left-xl",on:{click:t.collapseHandle}}),s("div",{staticClass:"pull-right"},[s("el-dropdown",{staticClass:"white",attrs:{trigger:"click"}},[s("span",{staticClass:"am-text-middle am-margin-right-sm"},[t._v("\n\t\t\t\t"+t._s(t.nickname)+"\n\t\t\t")]),s("img",{staticClass:"am-text-middle",attrs:{width:"20",src:t.avatar}}),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",[t._v("消息")]),s("el-dropdown-item",[t._v("设置")]),s("el-dropdown-item",[t._v("退出")])],1)],1)],1)])},B=[],z=a("2f62"),L={data:function(){return{nickname:"",avatar:""}},created:function(){this.getUserInfo()},methods:{collapseHandle:function(){this.$store.commit("collapseMenu")},getUserInfo:function(){var t=this;this.$http.get("/api/user/info/",{params:{uid:sessionStorage.uid}}).then(function(e){e.status&&(t.nickname=e.data.nickname,t.avatar=e.data.avatar)})}}},q=L,G=(a("b3b0"),Object(n["a"])(q,H,B,!1,null,"37de69fd",null)),R=G.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-menu",{attrs:{collapse:t.isCollapse,"default-openeds":["1"],"background-color":"#545c64",router:"","text-color":"#fff","active-text-color":"#ffd04b"}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-goods"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("商品管理")])]),a("el-menu-item",{attrs:{index:"/goods/category"}},[t._v("商品分类")]),a("el-menu-item",{attrs:{index:"/goods/release"}},[t._v("发布商品")]),a("el-menu-item",{attrs:{index:"/goods/list"}},[t._v("商品列表")])],2),1==t.role||2==t.role?a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-user-solid"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("用户管理")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/user/list"}},[t._v("用户列表")])],1),1==t.role?a("el-menu-item-group",[a("el-menu-item",[t._v("用户角色")])],1):t._e(),1==t.role?a("el-menu-item-group",[a("el-menu-item",[t._v("角色权限")])],1):t._e()],2):t._e(),a("el-submenu",{attrs:{index:"3"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-order"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("订单管理")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/order/list"}},[t._v("订单列表")])],1)],2)],1)},J=[],Z={computed:Object(z["b"])({isCollapse:function(t){return t.menu.isCollapse},role:function(t){return t.user.role}})},K=Z,Q=Object(n["a"])(K,T,J,!1,null,null,null),W=Q.exports,X={components:{HeaderBar:R,LeftMenu:W}},Y=X,tt=(a("ca9c"),Object(n["a"])(Y,U,F,!1,null,null,null)),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"clearfix title-box am-margin-bottom-lg"},[t._m(0),a("div",{staticClass:"pull-right"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("商品分类")])],1)],1)]),a("el-tree",{ref:"tree",attrs:{lazy:"","node-key":"id",load:t.loadNode,props:t.defaultProps},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.node,o=e.data;return a("div",{staticClass:"node-box"},[a("span",{staticClass:"node-name"},[t._v(t._s(s.label))]),a("span",{staticClass:"node-action"},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.openEditModal(s,o)}}},[t._v("\n\t\t\t\t\t编辑\n\t\t\t\t")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.openAddModal(s,o)}}},[t._v("\n\t\t\t\t\t添加\n\t\t\t\t")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.openDeleteModal(s,o)}}},[t._v("\n\t\t\t\t\t删除\n\t\t\t\t")])],1)])}}])}),a("el-dialog",{attrs:{title:"编辑节点","before-close":t.closeModal,visible:t.EditModalVisible},on:{"update:visible":function(e){t.EditModalVisible=e}}},[a("el-form",{attrs:{"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.EditForm.name,callback:function(e){t.$set(t.EditForm,"name",e)},expression:"EditForm.name"}})],1),a("el-form-item",{attrs:{label:"图片"}},[a("el-upload",{staticClass:"photo-uploader",attrs:{action:"/api/upload/common/",headers:t.headers,"on-success":t.uploadSuccess,"before-upload":t.beforeUpload,"show-file-list":!1}},[t.EditForm.img?a("img",{staticClass:"photo",attrs:{src:t.EditForm.img}}):a("i",{staticClass:"el-icon-plus photo-uploader-icon"})])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.EditModalVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.UpdateNodeHandle}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"添加节点","before-close":t.closeModal,visible:t.AddModalVisible},on:{"update:visible":function(e){t.AddModalVisible=e}}},[a("el-form",{attrs:{"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.AddForm.name,callback:function(e){t.$set(t.AddForm,"name",e)},expression:"AddForm.name"}})],1),a("el-form-item",{attrs:{label:"图片"}},[a("el-upload",{staticClass:"photo-uploader",attrs:{action:"/api/upload/common/",headers:t.headers,"on-success":t.uploadSuccess,"before-upload":t.beforeUpload,"show-file-list":!1}},[t.AddForm.img?a("img",{staticClass:"photo",attrs:{src:t.AddForm.img}}):a("i",{staticClass:"el-icon-plus photo-uploader-icon"})])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.AddModalVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.AddNodeHandle}},[t._v("确 定")])],1)],1)],1)},st=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pull-left"},[a("h3",{staticClass:"title"},[t._v("商品分类")])])}],ot={data:function(){return{defaultProps:{label:"name"},headers:{Authorization:"Bearer ".concat(sessionStorage.token)},EditModalVisible:!1,EditForm:{name:"",pId:"",img:""},AddModalVisible:!1,AddForm:{name:"",pId:"",img:""},currentNodeData:""}},methods:{loadNode:function(t,e){if(0===t.level)return e([{name:"全部分类",id:1,img:""}]);this.$http.get("/api/category/sub",{params:{pId:t.data.id}}).then(function(t){e(t.data)})},openEditModal:function(t,e){this.EditModalVisible=!0,this.EditForm=Object(f["a"])({},e),this.currentNode=t},UpdateNodeHandle:function(){var t=this;this.$http.post("/api/category/update/",Object(f["a"])({},this.EditForm)).then(function(e){e.status&&(t.$message(e.msg),t.EditModalVisible=!1,t.currentNode.data=Object(f["a"])({},t.EditForm))})},closeModal:function(t){t()},openAddModal:function(t,e){this.AddForm.pId=e.id,this.AddModalVisible=!0,this.currentNodeData=e},AddNodeHandle:function(){var t=this;this.$http.post("/api/category/add/",Object(f["a"])({},this.AddForm)).then(function(e){if(e.status){t.$message(e.msg),t.AddModalVisible=!1;var a=t.currentNodeData,s=Object(f["a"])({},t.AddForm,e.data);a.children||t.$set(a,"children",[]),a.children.push(s)}})},beforeUpload:function(t){var e="image/jpeg"===t.type||"image/png",a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a},uploadSuccess:function(t,e){console.log(t),this.AddForm.img=t.data[0]}}},rt=ot,it=(a("a1cb"),Object(n["a"])(rt,at,st,!1,null,"d92aeaae",null)),lt=it.exports,nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{fixed:"",label:"商品名称",width:"550"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"goods"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:e.row.img_md}})]),a("div",{staticClass:"name"},[a("span",[t._v(t._s(e.row.name))]),a("br"),a("span",[t._v("商品货号："+t._s(e.row.articleNo))])])])]}}])}),a("el-table-column",{attrs:{prop:"price",label:"价格",width:"120"}}),a("el-table-column",{attrs:{prop:"inventory",label:"库存",width:"120"}}),a("el-table-column",{attrs:{prop:"create_time",label:"发布时间",width:"180"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:{name:"GoodsEdit",params:{id:e.row.id}}}},[a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit",size:"small"}})],1),a("el-button",{staticClass:"deleteBtn",attrs:{icon:"el-icon-delete",type:"danger",plain:"",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),t.deleteRow(e.row.id)}}})]}}])})],1),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v("确定要删除该商品吗？删除之后无法恢复！！！")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)])],1)},ct=[],dt=(a("ac6a"),{data:function(){return{dialogVisible:!1,tableData:[]}},created:function(){this.getGoodsList()},methods:{getGoodsList:function(){var t=this;this.axios.get("/api/goods/",{params:{pageSize:100}}).then(function(e){e.status&&(e.data.forEach(function(t,e){t.create_time=new Date(t.create_time).toLocaleString()}),t.tableData=e.data)})},deleteRow:function(t){this.dialogVisible=!0,console.log(t)}}}),ut=dt,mt=(a("0252"),Object(n["a"])(ut,nt,ct,!1,null,"72fa065d",null)),pt=mt.exports,ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"clearfix title-box am-margin-bottom-lg"},[t._m(0),a("div",{staticClass:"pull-right"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("发布商品")])],1)],1)]),a("el-form",{ref:"form",attrs:{model:t.form,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"商品分类"}},[a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:t.form.cate_1st,callback:function(e){t.$set(t.form,"cate_1st",e)},expression:"form.cate_1st"}},t._l(t.cate_1st_options,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:t.form.cate_2nd,callback:function(e){t.$set(t.form,"cate_2nd",e)},expression:"form.cate_2nd"}},t._l(t.cate_2nd_options,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:t.form.cate_3rd,callback:function(e){t.$set(t.form,"cate_3rd",e)},expression:"form.cate_3rd"}},t._l(t.cate_3rd_options,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),a("el-form-item",{attrs:{label:"商品名称"}},[a("el-col",{attrs:{span:14}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"===typeof e?e.trim():e)},expression:"form.name"}})],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("商品标题名称长度至少3个字符，最长200个汉字")])],1),a("el-form-item",{attrs:{label:"商品卖点"}},[a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.hotPoint,callback:function(e){t.$set(t.form,"hotPoint","string"===typeof e?e.trim():e)},expression:"form.hotPoint"}})],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("商品卖点不能超过140个汉字")])],1),a("el-form-item",{attrs:{label:"商品价格"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",t._n("string"===typeof e?e.trim():e))},expression:"form.price"}},[a("template",{slot:"append"},[t._v("元")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("价格必须是0-999999之间的数字，且不能高于市场价")]),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("此价格为商品实际销售价格，如果商品存在规格，改价格显示最低价格")])],1),a("el-form-item",{attrs:{label:"市场价"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.marketPrice,callback:function(e){t.$set(t.form,"marketPrice",t._n("string"===typeof e?e.trim():e))},expression:"form.marketPrice"}},[a("template",{slot:"append"},[t._v("元")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("价格必须是0-999999之间的数字，此价格仅为市场参考价，请根据实际情况认真填写")])],1),a("el-form-item",{attrs:{label:"成本价"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.cost,callback:function(e){t.$set(t.form,"cost",t._n("string"===typeof e?e.trim():e))},expression:"form.cost"}},[a("template",{slot:"append"},[t._v("元")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("价格必须是0-999999之间的数字，此价格为商户对所销售的商品的实际成本价进行备注记录，非必填选项，不会在前台销售页面中显示")])],1),a("el-form-item",{attrs:{label:"折扣"}},[a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{disabled:""},model:{value:t.form.discount,callback:function(e){t.$set(t.form,"discount",e)},expression:"form.discount"}},[a("template",{slot:"append"},[t._v("折")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("根据销售价与市场价比例自动生成不需要编辑")])],1),a("el-form-item",{attrs:{label:"商品库存"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.inventory,callback:function(e){t.$set(t.form,"inventory",t._n("string"===typeof e?e.trim():e))},expression:"form.inventory"}},[a("template",{slot:"append"},[t._v("件")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("价格必须是0-999999之间的整数")]),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("若启动了库存配置，则系统自动计算商品的总数，此处无需卖家填写")])],1),a("el-form-item",{attrs:{label:"商品货号"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.articleNo,callback:function(e){t.$set(t.form,"articleNo","string"===typeof e?e.trim():e)},expression:"form.articleNo"}})],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("商品货号是商家管理商品的编号，买家不可见")]),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("最多输入20个字符，只支持输入中文、字母、数字、_、/、-和小数点")])],1),a("el-form-item",{attrs:{label:"商品主图"}},[a("el-upload",{attrs:{limit:1,"list-type":"picture-card","before-upload":t.handleBeforeUpload,"on-success":t.handleMainSuccess,"before-remove":t.handleMainBeforeRemove,"on-exceed":t.handleMainExceed,"on-error":t.handleError,"on-preview":t.handleCardPreview,action:"/api/upload/goods/"}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("上传商品默认主图，如多规格时将默认图片或分规格上传规格主图，支持jpg、if、png格式上传或从图片空间选中，建议使用尺寸\n\t\t\t\t800*800像素以上，大小不超过1M的正方形图片，上传后的图片将自动保存在图片空间的默认分类中")])],1),a("el-form-item",{attrs:{label:"商品轮播图"}},[a("el-upload",{attrs:{limit:6,"list-type":"picture-card","before-upload":t.handleBeforeUpload,"on-success":t.handleSliderSuccess,"on-exceed":t.handleSliderExceed,"before-remove":t.handleSliderBeforeRemove,"on-error":t.handleError,"on-preview":t.handleCardPreview,action:"/api/upload/slider/"}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("上传商品默认主图，如多规格时将默认图片或分规格上传规格主图，支持jpg、if、png格式上传或从图片空间选中，建议使用尺寸\n\t\t\t\t800*800像素以上，大小不超过1M的正方形图片，上传后的图片将自动保存在图片空间的默认分类中")])],1),a("div",{staticClass:"section-title"},[t._v("商品详情描述")]),a("el-form-item",{attrs:{label:"商品品牌"}},[a("el-col",{attrs:{span:14}},[a("el-input",{model:{value:t.form.brand,callback:function(e){t.$set(t.form,"brand","string"===typeof e?e.trim():e)},expression:"form.brand"}})],1)],1),a("el-form-item",{attrs:{label:"商品描述"}},[a("div",{ref:"toolbar",staticClass:"w-e-toolbar"}),a("div",{ref:"editor",staticClass:"w-e-text-container"})]),a("div",{staticClass:"section-title"},[t._v("商品物流信息")]),a("el-form-item",{attrs:{label:"所在地"}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.province,callback:function(e){t.$set(t.form,"province",e)},expression:"form.province"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),a("el-option",{attrs:{label:"区域二",value:"beijing"}}),a("el-option",{attrs:{label:"区域三",value:"beijing"}})],1),a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.city,callback:function(e){t.$set(t.form,"city",e)},expression:"form.city"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),a("el-option",{attrs:{label:"区域二",value:"beijing"}}),a("el-option",{attrs:{label:"区域三",value:"beijing"}})],1),a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.area,callback:function(e){t.$set(t.form,"area",e)},expression:"form.area"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),a("el-option",{attrs:{label:"区域二",value:"beijing"}}),a("el-option",{attrs:{label:"区域三",value:"beijing"}})],1)],1),a("el-form-item",{attrs:{label:"运费"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.freight,callback:function(e){t.$set(t.form,"freight","string"===typeof e?e.trim():e)},expression:"form.freight"}},[a("template",{slot:"append"},[t._v("元")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("运费设为0，前台商品将显示免运费")])],1),a("el-form-item",[a("el-button",{attrs:{type:"success"},on:{click:t.releaseHandle}},[t._v("提交")])],1)],1)],1)},vt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pull-left"},[a("h3",{staticClass:"title"},[t._v("发布新商品")])])}],bt=a("1a0b"),ht=a.n(bt),gt={data:function(){return{dialogImageUrl:"",dialogVisible:!1,form:{cate_1st:"",cate_2nd:"",cate_3rd:"",hotPoint:"",name:"",price:"",marketPrice:"",cost:"",discount:"0",inventory:"",articleNo:"",img_lg:"",img_md:"",slider:"",brand:"",detail:"",freight:"0",province:"山东省",city:"青岛市",area:"城阳区"},cate_1st_options:[],cate_2nd_options:[],cate_3rd_options:[]}},mounted:function(){var t=this,e=new ht.a(this.$refs.toolbar,this.$refs.editor);e.customConfig.zIndex=100,e.customConfig.uploadImgServer="/api/upload/editor/",e.customConfig.uploadFileName="file",e.customConfig.onchange=function(e){t.form.detail=e},e.create()},created:function(){this.cateChangeHandle(1,"cate_1st")},watch:{"form.cate_1st":function(t,e){this.cateChangeHandle(t,"cate_2nd")},"form.cate_2nd":function(t,e){this.cateChangeHandle(t,"cate_3rd")}},methods:{cateChangeHandle:function(t,e){var a=this;if(!t)return!1;this.getOptions(t).then(function(t){if(a[e+"_options"]=t,0==t.length)return a.form[e]="",!1;a.form[e]=t[0].id})},getOptions:function(t){return this.axios.get("/api/category/sub/",{params:{pId:t}}).then(function(t){if(t.status)return Promise.resolve(t.data);this.$message.error(t.msg)})},handleMainSuccess:function(t,e,a){t.status&&(this.form.img_lg=t.lgImg,this.form.img_md=t.mdImg)},handleError:function(t,e,a){this.$message.error("错误："+t)},handleBeforeUpload:function(t){var e=/^image\/(jpe?g|png)$/,a=e.test(t.type),s=t.size/1024/1024<2;return a||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),s||this.$message.error("上传头像图片大小不能超过 2MB!"),a&&s},handleMainBeforeRemove:function(t,e){var a=this;t.response&&this.axios.post("/api/upload/delete/",{src:"."+t.response.lgImg}).then(function(e){if(e.status)return a.axios.post("/api/upload/delete/",{src:"."+t.response.mdImg})}).then(function(t){return!!t.status&&(a.form.img_lg="",a.form.img_md="",!0)})},handleCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleMainExceed:function(t,e){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},handleSliderSuccess:function(t,e,a){t.status&&(this.form.slider=this.convertFileList(a))},handleSliderExceed:function(t,e){this.$message.warning("当前限制选择 6 个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},handleSliderBeforeRemove:function(t,e){var a=this;t.response&&this.axios.post("/api/upload/delete/",{src:"."+t.response.src}).then(function(t){return!!t.status&&(a.form.slider=a.convertFileList(e),!0)})},convertFileList:function(t){var e=[];return t.forEach(function(t,a){e.push(t.response.src)}),e.toString()},releaseHandle:function(){var t=this;this.axios.post("/api/goods/release/",this.form).then(function(e){e.status&&(t.$router.go(0),t.$message({message:"发布商品成功！",type:"success"}))})}}},_t=gt,Ct=(a("5867"),Object(n["a"])(_t,ft,vt,!1,null,"2ddb8eec",null)),xt=Ct.exports,yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"clearfix title-box am-margin-bottom-lg"},[t._m(0),a("div",{staticClass:"pull-right"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("发布商品")])],1)],1)]),a("el-form",{ref:"form",attrs:{model:t.form,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"商品分类"}},[a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:t.form.cate_1st,callback:function(e){t.$set(t.form,"cate_1st",e)},expression:"form.cate_1st"}},t._l(t.cate_1st_options,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:t.form.cate_2nd,callback:function(e){t.$set(t.form,"cate_2nd",e)},expression:"form.cate_2nd"}},t._l(t.cate_2nd_options,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:t.form.cate_3rd,callback:function(e){t.$set(t.form,"cate_3rd",e)},expression:"form.cate_3rd"}},t._l(t.cate_3rd_options,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),a("el-form-item",{attrs:{label:"商品名称"}},[a("el-col",{attrs:{span:14}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"===typeof e?e.trim():e)},expression:"form.name"}})],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("商品标题名称长度至少3个字符，最长200个汉字")])],1),a("el-form-item",{attrs:{label:"商品卖点"}},[a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.hotPoint,callback:function(e){t.$set(t.form,"hotPoint","string"===typeof e?e.trim():e)},expression:"form.hotPoint"}})],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("商品卖点不能超过140个汉字")])],1),a("el-form-item",{attrs:{label:"商品价格"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",t._n("string"===typeof e?e.trim():e))},expression:"form.price"}},[a("template",{slot:"append"},[t._v("元")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("价格必须是0-999999之间的数字，且不能高于市场价")]),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("此价格为商品实际销售价格，如果商品存在规格，改价格显示最低价格")])],1),a("el-form-item",{attrs:{label:"市场价"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.marketPrice,callback:function(e){t.$set(t.form,"marketPrice",t._n("string"===typeof e?e.trim():e))},expression:"form.marketPrice"}},[a("template",{slot:"append"},[t._v("元")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("价格必须是0-999999之间的数字，此价格仅为市场参考价，请根据实际情况认真填写")])],1),a("el-form-item",{attrs:{label:"成本价"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.cost,callback:function(e){t.$set(t.form,"cost",t._n("string"===typeof e?e.trim():e))},expression:"form.cost"}},[a("template",{slot:"append"},[t._v("元")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("价格必须是0-999999之间的数字，此价格为商户对所销售的商品的实际成本价进行备注记录，非必填选项，不会在前台销售页面中显示")])],1),a("el-form-item",{attrs:{label:"折扣"}},[a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{disabled:""},model:{value:t.form.discount,callback:function(e){t.$set(t.form,"discount",e)},expression:"form.discount"}},[a("template",{slot:"append"},[t._v("折")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("根据销售价与市场价比例自动生成不需要编辑")])],1),a("el-form-item",{attrs:{label:"商品库存"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.inventory,callback:function(e){t.$set(t.form,"inventory",t._n("string"===typeof e?e.trim():e))},expression:"form.inventory"}},[a("template",{slot:"append"},[t._v("件")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("价格必须是0-999999之间的整数")]),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("若启动了库存配置，则系统自动计算商品的总数，此处无需卖家填写")])],1),a("el-form-item",{attrs:{label:"商品货号"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.articleNo,callback:function(e){t.$set(t.form,"articleNo","string"===typeof e?e.trim():e)},expression:"form.articleNo"}})],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("商品货号是商家管理商品的编号，买家不可见")]),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("最多输入20个字符，只支持输入中文、字母、数字、_、/、-和小数点")])],1),a("el-form-item",{attrs:{label:"商品主图"}},[a("el-upload",{attrs:{limit:1,"list-type":"picture-card","before-upload":t.handleBeforeUpload,"on-success":t.handleMainSuccess,"before-remove":t.handleMainBeforeRemove,"on-exceed":t.handleMainExceed,"on-error":t.handleError,"on-preview":t.handleCardPreview,action:"/api/upload/goods/"}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("上传商品默认主图，如多规格时将默认图片或分规格上传规格主图，支持jpg、if、png格式上传或从图片空间选中，建议使用尺寸 800*800像素以上，大小不超过1M的正方形图片，上传后的图片将自动保存在图片空间的默认分类中")])],1),a("el-form-item",{attrs:{label:"商品轮播图"}},[a("el-upload",{attrs:{limit:6,"list-type":"picture-card","before-upload":t.handleBeforeUpload,"on-success":t.handleSliderSuccess,"on-exceed":t.handleSliderExceed,"before-remove":t.handleSliderBeforeRemove,"on-error":t.handleError,"on-preview":t.handleCardPreview,action:"/api/upload/slider/"}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("上传商品默认主图，如多规格时将默认图片或分规格上传规格主图，支持jpg、if、png格式上传或从图片空间选中，建议使用尺寸 800*800像素以上，大小不超过1M的正方形图片，上传后的图片将自动保存在图片空间的默认分类中")])],1),a("div",{staticClass:"section-title"},[t._v("商品详情描述")]),a("el-form-item",{attrs:{label:"商品品牌"}},[a("el-col",{attrs:{span:14}},[a("el-input",{model:{value:t.form.brand,callback:function(e){t.$set(t.form,"brand","string"===typeof e?e.trim():e)},expression:"form.brand"}})],1)],1),a("el-form-item",{attrs:{label:"商品描述"}},[a("div",{staticClass:"w-e-toolbar",attrs:{id:"toolbar"}}),a("div",{ref:"editor",staticClass:"w-e-text-container",attrs:{id:"editorZone"}})]),a("div",{staticClass:"section-title"},[t._v("商品物流信息")]),a("el-form-item",{attrs:{label:"所在地"}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.province,callback:function(e){t.$set(t.form,"province",e)},expression:"form.province"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),a("el-option",{attrs:{label:"区域二",value:"beijing"}}),a("el-option",{attrs:{label:"区域三",value:"beijing"}})],1),a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.city,callback:function(e){t.$set(t.form,"city",e)},expression:"form.city"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),a("el-option",{attrs:{label:"区域二",value:"beijing"}}),a("el-option",{attrs:{label:"区域三",value:"beijing"}})],1),a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.area,callback:function(e){t.$set(t.form,"area",e)},expression:"form.area"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),a("el-option",{attrs:{label:"区域二",value:"beijing"}}),a("el-option",{attrs:{label:"区域三",value:"beijing"}})],1)],1),a("el-form-item",{attrs:{label:"运费"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.freight,callback:function(e){t.$set(t.form,"freight","string"===typeof e?e.trim():e)},expression:"form.freight"}},[a("template",{slot:"append"},[t._v("元")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("运费设为0，前台商品将显示免运费")])],1),a("el-form-item",[a("el-button",{attrs:{type:"success"},on:{click:t.releaseHandle}},[t._v("提交")])],1)],1)],1)},kt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pull-left"},[a("h3",{staticClass:"title"},[t._v("发布新商品")])])}],wt={data:function(){return{dialogImageUrl:"",dialogVisible:!1,form:{cate_1st:"",cate_2nd:"",cate_3rd:"",hotPoint:"",name:"",price:"",marketPrice:"",cost:"",discount:"0",inventory:"",articleNo:"",img_lg:"",img_md:"",slider:"",brand:"",detail:"",freight:"0",province:"山东省",city:"青岛市",area:"城阳区"},cate_1st_options:[],cate_2nd_options:[],cate_3rd_options:[]}},created:function(){this.cateChangeHandle(1,"cate_1st")},mounted:function(){var t=this,e=new ht.a("#toolbar","#editorZone");e.customConfig.zIndex=100,e.customConfig.uploadImgServer="/api/upload/common/",e.customConfig.uploadFileName="file",e.customConfig.onchange=function(e){t.form.detail=e},e.create()},watch:{"form.cate_1st":function(t,e){this.cateChangeHandle(t,"cate_2nd")},"form.cate_2nd":function(t,e){this.cateChangeHandle(t,"cate_3rd")}},methods:{cateChangeHandle:function(t,e){var a=this;if(!t)return!1;this.getOptions(t).then(function(t){if(a[e+"_options"]=t,0==t.length)return a.form[e]="",!1;a.form[e]=t[0].id})},getOptions:function(t){return this.axios.get("/api/category/sub/",{params:{pId:t}}).then(function(t){if(t.data.status)return Promise.resolve(t.data.data);this.$message.error(t.data.msg)})},handleMainSuccess:function(t,e,a){t.status&&(this.form.img_lg=t.lgImg,this.form.img_md=t.mdImg)},handleError:function(t,e,a){this.$message.error("错误："+t)},handleBeforeUpload:function(t){var e=/^image\/(jpe?g|png)$/,a=e.test(t.type),s=t.size/1024/1024<2;return a||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),s||this.$message.error("上传头像图片大小不能超过 2MB!"),a&&s},handleMainBeforeRemove:function(t,e){var a=this;t.response&&this.axios.post("/api/upload/delete/",{src:"."+t.response.lgImg}).then(function(e){if(e.status)return a.axios.post("/api/upload/delete/",{src:"."+t.response.mdImg})}).then(function(t){return!!t.status&&(a.form.img_lg="",a.form.img_md="",!0)})},handleCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleMainExceed:function(t,e){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},handleSliderSuccess:function(t,e,a){t.status&&(this.form.slider=this.convertFileList(a))},handleSliderExceed:function(t,e){this.$message.warning("当前限制选择 6 个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},handleSliderBeforeRemove:function(t,e){var a=this;t.response&&this.axios.post("/api/upload/delete/",{src:"."+t.response.src}).then(function(t){return!!t.status&&(a.form.slider=a.convertFileList(e),!0)})},convertFileList:function(t){var e=[];return t.forEach(function(t,a){e.push(t.response.src)}),e.toString()},releaseHandle:function(){var t=this;this.axios.post("/api/goods/release/",this.form).then(function(e){e.data.status&&(t.$router.go(0),t.$message({message:"发布商品成功！",type:"success"}))})}}},$t=wt,Et=(a("37e6"),Object(n["a"])($t,yt,kt,!1,null,"4d28afb7",null)),Pt=Et.exports;s["default"].use(u["a"]);var St=[{path:"/register",name:"UserRegister",component:w},{path:"/login/",name:"UserLogin",component:g,props:function(t){return t.query},alias:"/"},{path:"/index",name:"Index",component:et,meta:{requiredAuth:!0},children:[{path:"/goods/category/",name:"GoodsCategory",component:lt,meta:{requiredAuth:!0}},{path:"/goods/list",name:"GoodsList",component:pt,meta:{requiredAuth:!0}},{path:"/goods/release",name:"GoodsRelease",component:xt,meta:{requiredAuth:!0}},{path:"/goods/edit",name:"GoodsEdit",component:Pt,meta:{requiredAuth:!0}},{path:"/user/list",name:"UserList",component:M,meta:{requiredAuth:!0}},{path:"/order/list",name:"OrderList",component:I,meta:{requiredAuth:!0}}]}],Dt=new u["a"]({routes:St});Dt.beforeEach(function(t,e,a){if(t.matched.some(function(t){return t.meta.requiredAuth})){if(!sessionStorage.token)return void a({path:"/login",query:{redirect:t.fullPath}});a()}else a()});var Mt=Dt,jt=a("bc3a"),Ot=a.n(jt);s["default"].use(z["a"]);var Vt={state:{uid:"",role:"",token:""},mutations:{saveUserInfo:function(t,e){t.uid=e.id,t.token=e.token,t.role=e.role}},actions:{Login:function(t,e){var a=t.commit;t.state;return new Promise(function(t,s){Ot.a.post("/api/user/login",e).then(function(e){e.status?(a("saveUserInfo",e.data),t(e)):s(e)})})}}},Nt={state:{isCollapse:!1},mutations:{collapseMenu:function(t){t.isCollapse=!t.isCollapse}},actions:{}},At=new z["a"].Store({modules:{user:Vt,menu:Nt}}),It=a("5c96"),Ut=a.n(It);a("0fae");s["default"].use(Ut.a,{size:"small"});var Ft,Ht=a("a7fe"),Bt=a.n(Ht);Ot.a.interceptors.request.use(function(t){return Ft=It["Loading"].service({background:"rgba(0, 0, 0, 0.8)"}),"/api/user/login"==t.url||"/api/user/register"==t.url?t:(sessionStorage.token?t.headers.Authorization="Bearer ".concat(sessionStorage.token):It["Message"].error("token未获取，请登录！"),t)},function(t){return Promise.reject(t)}),Ot.a.interceptors.response.use(function(t){switch(setTimeout(function(){Ft.close()},500),t.status){case 200:return t.data;default:It["Message"].error(t.response.statusText);break}},function(t){return 401==t.response.status&&It["Message"].error("Token无效，请重新登录！"),Promise.reject(t)}),s["default"].use(Bt.a,Ot.a),s["default"].config.productionTip=!1,new s["default"]({router:Mt,store:At,render:function(t){return t(d)}}).$mount("#app")},5867:function(t,e,a){"use strict";var s=a("228d"),o=a.n(s);o.a},"5c0b":function(t,e,a){"use strict";var s=a("5e27"),o=a.n(s);o.a},"5e27":function(t,e,a){},6582:function(t,e,a){},"7ba1":function(t,e,a){},9630:function(t,e,a){},a1cb:function(t,e,a){"use strict";var s=a("6582"),o=a.n(s);o.a},a266:function(t,e,a){},b3b0:function(t,e,a){"use strict";var s=a("a266"),o=a.n(s);o.a},c79a:function(t,e,a){},ca9c:function(t,e,a){"use strict";var s=a("2a56"),o=a.n(s);o.a},cf05:function(t,e,a){t.exports=a.p+"img/logo.82b9c7a5.png"},d3af:function(t,e,a){},d742:function(t,e,a){t.exports=a.p+"img/logo.efe6a81a.png"},f2c0:function(t,e,a){}});
//# sourceMappingURL=app.880a7499.js.map