<!doctype html>
<html class="no-js">

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="description" content="">
		<meta name="keywords" content="">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<!-- Set render engine for 360 browser -->
		<meta name="renderer" content="webkit">
		<!-- No Baidu Siteapp-->
		<meta http-equiv="Cache-Control" content="no-siteapp" />
		<link rel="stylesheet" href="assets/css/amazeui.min.css">
		<link rel="stylesheet" href="assets/css/app.css">
		<link rel="stylesheet" type="text/css" href="css/register2.css" />
	</head>

	<body>
		<div class="head-fixed">
			<span>注册分期乐账号</span>
			<a href="register.html" class="go-back am-block">
				<i class="am-header-icon am-icon-angle-left" style="font-size: 30px;"></i>
			</a>
		</div>
		<!--错误提示-->
		<div class="tips-box" id="tips">
			<span></span>
		</div>
		<div class="title">
			请设置并牢记密码，已完成账号注册
		</div>
		<form action="" method="" class="am-margin-top-sm">
			<ul class="form-new ">
				<li class="form-input am-g relative">
					<div class="am-u-sm-3">
						<label for="pwd1">登陆密码</label>
					</div>
					<div class="am-u-sm-9 ">
						<input datatype="*6-16" type="password" name="password" id="pwd1" value="" placeholder="请设置6-16位任意字符登录密码" nullmsg='必须设置一个登陆密码 ' errormsg="密码格式应为6~16位任意字符" />
					</div>
					<div class="pwd-eye">
						<i class="icon icon-eye eye-btn" id="icon-eye"></i>
					</div>
				</li>
				<li class="form-input am-g relative">
					<div class="am-u-sm-3">
						<label for="pwd2">确认密码</label>
					</div>
					<div class="am-u-sm-9">
						<input datatype="*6-16" type="password" name="" id="pwd2" recheck="password" value="" placeholder="请再次输入登录密码" nullmsg='必须确认您的登陆密码' />
					</div>
					<div class="pwd-eye">
						<i class="icon icon-eye eye-btn" id="icon-eye"></i>
					</div>
				</li>
				<li class="form-input am-g relative">
					<div class="am-u-sm-3">
						<label for="pwd2">绑定邮箱</label>
					</div>
					<div class="am-u-sm-9">
						<input datatype="e" type="email" name="email" id="email" value="" placeholder="请绑定您的邮箱" nullmsg='必须绑定一个邮箱' errormsg="邮箱格式不正确" />
					</div>
				</li>
			</ul>
			<div class="agree">
				同意
				<a href="">服务协议</a>
			</div>
			<button class="am-btn am-btn-secondary" type="submit" id="next-btn">完成注册</button>
		</form>
		<!--[if (gte IE 9)|!(IE)]><!-->
		<!--<![endif]-->
		<!--[if lte IE 8 ]>
<script src="http://libs.baidu.com/jquery/1.11.3/jquery.min.js"></script>
<script src="http://cdn.staticfile.org/modernizr/2.8.3/modernizr.js"></script>
<script src="assets/js/amazeui.ie8polyfill.min.js"></script>
<![endif]-->
		<script src="js/jquery-3.2.1.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="assets/js/amazeui.min.js"></script>
		<script src="js/Validform_v5.3.2_min.js" type="text/javascript" charset="utf-8"></script>
	</body>
	<script type="text/javascript">
		//判断密码是否可见
		//判断密码是否可见
		function pwd_eye(obj) {
			var flag = obj.hasClass("icon-eye");
			if(flag) {
				obj.parent(".pwd-eye").siblings().find("input").attr("type", "password")
			} else {
				obj.parent(".pwd-eye").siblings().find("input").attr("type", "text");
			}
		}
		//密码可见
		var eyeFlag1 = true;
		var eyeFlag2 = true;
		$(".eye-btn").click(function() {
			console.log($(this).parents("li").index());
			if($(this).parents("li").index() == 0) {
				if(eyeFlag1) {
					$(this).removeClass("icon-eye").addClass("icon-eye1");
					pwd_eye($(this));
					eyeFlag1 = !eyeFlag1;
				} else {
					$(this).removeClass("icon-eye1").addClass("icon-eye");
					pwd_eye($(this));
					eyeFlag1 = !eyeFlag1;
				}
			} else {
				if(eyeFlag2) {
					$(this).removeClass("icon-eye").addClass("icon-eye1");
					pwd_eye($(this));
					eyeFlag2 = !eyeFlag2;
				} else {
					$(this).removeClass("icon-eye1").addClass("icon-eye");
					pwd_eye($(this));
					eyeFlag2 = !eyeFlag2;
				}
			}
		})
		//表单验证
		var showmsg = function(msg) {
			$(".tips-box").text(msg);
			$(".tips-box").css("display", "block");
			setInterval(function() {
				$(".tips-box").css("display", "none");
			}, 3000)
		}
		//表单验证
		$("form").Validform({
			btnSubmit: "#next-btn",
			//			tiptype: 1,
			tiptype: function(msg) {
				showmsg(msg);
			},
			ignoreHidden: false,
			dragonfly: false,
			tipSweep: true,
			label: ".label",
			showAllError: false,
			postonce: true,
			ajaxPost: true,
			datatype: {
				"*6-20": /^[^\s]{6,20}$/,
				"z2-4": /^[\u4E00-\u9FA5\uf900-\ufa2d]{2,4}$/,
				"myphone": /^[1][3,4,5,7,8][0-9]{9}$/,
				"numcode": /^\d{6}$/,
			},
			usePlugin: {
				swfupload: {},
				datepicker: {},
				passwordstrength: {},
				jqtransform: {
					selector: "select,input"
				}
			},
			beforeSubmit: function(curform) {
				//在验证成功后，表单提交前执行的函数，curform参数是当前表单对象。
				//这里明确return false的话表单将不会提交;	
				var data = $("form").serialize();
				console.log(data);
				$.post('/users/register/', data, function(data, textStatus, xhr) {
					/*optional stuff to do after success */
				});
				location.href = "_login.html";
				return false;
			}
		});
	</script>

</html>