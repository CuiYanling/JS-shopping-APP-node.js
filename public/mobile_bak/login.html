<!doctype html>
<html class="no-js">

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="description" content="">
		<meta name="keywords" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>登录</title>
		<link rel="stylesheet" href="assets/css/amazeui.min.css">
		<link rel="stylesheet" href="assets/css/app.css">
		<link rel="stylesheet" type="text/css" href="css/index.css" />
		<link rel="stylesheet" type="text/css" href="css/login.css" />
	</head>

	<body>
		<header data-am-widget="header" class="am-header">
			<div class="am-header-left am-header-nav">
				<a class="">
					<p onclick="goback()" class="backle am-icon-angle-left"></p>
				</a>
			</div>
			<h1 class="am-header-title">登录 </h1>
		</header>
		<form action="" class="am-form login" id="form-with-tooltip">
			<fieldset>
				<div class="am-form-group">
					<input name="account" id="account" type="text" id="doc-vld-name-2-0" minlength="3" placeholder="输入用户名/邮箱/手机号" required/>
				</div>
				<div class="am-form-group">
					<input name="password" type="password" id="doc-vld-pwd-1-0" placeholder="输入登录密码" pattern="^\d{6}$" required data-foolish-msg="请输入密码" />
				</div>
				<button class="am-btn am-btn-secondary" id="login" type="submit">登录</button>
				<div class="regicon am-cf">
					<a class="am-fl" href="register.html">快速注册</a>
					<a class="am-fr" href="register.html">忘记密码？</a>
				</div>
			</fieldset>
		</form>
		<!--在这里编写你的代码-->
		<!--[if (gte IE 9)|!(IE)]><!-->
		<!--<![endif]-->
		<!--[if lte IE 8 ]>
<script src="http://libs.baidu.com/jquery/1.11.3/jquery.min.js"></script>
<script src="http://cdn.staticfile.org/modernizr/2.8.3/modernizr.js"></script>
<script src="assets/js/amazeui.ie8polyfill.min.js"></script>
<![endif]-->
		<script src="js/jquery-3.2.1.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="assets/js/amazeui.min.js"></script>
		<script type="text/javascript">
			$(function() {
				var $form = $('#form-with-tooltip');
				var $tooltip = $('<div id="vld-tooltip">提示信息！</div>');
				$tooltip.appendTo(document.body);

				$form.validator();

				var validator = $form.data('amui.validator');

				$form.on('focusin focusout', '.am-form-error input', function(e) {
					if(e.type === 'focusin') {
						var $this = $(this);
						var offset = $this.offset();
						var msg = $this.data('foolishMsg') || validator.getValidationMessage($this.data('validity'));

						$tooltip.text(msg).show().css({
							left: offset.left + 10,
							top: offset.top + $(this).outerHeight() + 10
						});
					} else {
						$tooltip.hide();
					}
				});
				// 登录
				$("#login").click(function(event) {
					/* Act on the event */
					event.preventDefault();
					/* 表单验证 */
					var flag = $form.validator('isFormValid');
					if(flag) {
						var data = $form.serialize();
						$.post('/users/login/', data, function(result) {
							if(result.status) {
								// 储存账户状态
								sessionStorage.account = $("#account").val();
								// 跳转页面
								location.href = "/mobile/index.html";
							} else {
								alert(result.msg);
							}
						});
					}
				});

			});

			function goback() {
				window.history.back();
			}
		</script>
	</body>

</html>