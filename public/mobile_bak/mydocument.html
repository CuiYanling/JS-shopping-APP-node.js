<!doctype html>
<html class="no-js">

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="description" content="">
		<meta name="keywords" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>个人资料</title>
		<link rel="stylesheet" href="assets/css/amazeui.min.css">
		<link rel="stylesheet" href="assets/css/app.css">
		<link rel="stylesheet" type="text/css" href="css/index.css" />
		<link rel="stylesheet" type="text/css" href="css/login.css" />
		<link rel="stylesheet" type="text/css" href="css/my.css" />
	</head>

	<body>
		<header data-am-widget="header" class="am-header">
			<div class="am-header-left am-header-nav">
				<a class="">
					<p onclick="goback()" class="backle am-icon-angle-left"></p>
				</a>

			</div>
			<div class="am-header-right  am-header-nav">
				<a href="index.html" class="home">

					<img src="img/home.png" />
				</a>
			</div>
		</header>
		<!--个人资料-->
		<form action="" class="">
			<div id="infoBox">

			</div>
			<div class="nickname headbox sex am-cf">
				<p class="am-fl">收货地址</p>
				<p class="am-fr">
					<a href="myaddress.html"><span class="am-icon-angle-right"></span></a>
				</p>
			</div>
			<!--隐藏数据-->
			<input type="hidden" name="account" id="account" value="" />

			<div class="addaddress">
				<span id="saveBtn" class="adbtn am-text-center">保存</span>
			</div>

		</form>

		<!--在这里编写你的代码-->

		<!--[if (gte IE 9)|!(IE)]><!-->

		<!--<![endif]-->
		<!--[if lte IE 8 ]>
<script src="http://libs.baidu.com/jquery/1.11.3/jquery.min.js"></script>
<script src="http://cdn.staticfile.org/modernizr/2.8.3/modernizr.js"></script>
<script src="assets/js/amazeui.ie8polyfill.min.js"></script>
<![endif]-->
		<script src="js/jquery-3.2.1.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="assets/js/amazeui.min.js"></script>
		<script src="js/template-web.js" type="text/javascript" charset="utf-8"></script>
		<script src="assets/js/app.js" type="text/javascript" charset="utf-8"></script>
		<script id="tpl-user" type="text/html">
			<div class="headbox am-cf">
				<div class="headpic am-fl">
					<img src="{{avatar}}" />
				</div>
				<div class="changepic am-fr">
					点击更换头像&nbsp;
					<span class="am-icon-angle-right"></span>
				</div>
			</div>
			<div class="nickname headbox sex am-cf">
				<p class="am-fl">昵称</p>
				<p class="am-fr">
					<input type="text" class="" name="nickname" id="" value="{{nickname}}" />
					<span class="am-icon-angle-right"></span>
				</p>
			</div>

			<div class="headbox sex am-cf">
				<p class="am-fl">性别</p>
				<select name="sex" class="am-fr">
					<option value="男">男</option>
					<option value="女">女</option>
				</select>
			</div>
			<div class="headbox sex am-cf birth">
				<p class="am-fl">生日</p>
				<input class="choosebir" type="text" placeholder="点击设置" required />
			</div>
		</script>

		<script type="text/javascript">
			function goback() {
				window.history.back();
			}

			$(document).ready(function() {
				//赋值input[type=hidden]
				var account = sessionStorage.account;
				if(!account) {
					alert("暂无账户信息，请登录！");
					return;
				}
				$("#account").val(account);
				$("#saveBtn").click(function() {
					var data = $("form").serialize();
					$.post("/users/updateInfo/", data, function(result) {
						if(result.status) {
							location.href = "my.html";
						} else {
							alert(result.msg);
						}
					});
				});

				$.ajax({
					type: "get",
					url: "/users/getInfo/",
					async: true,
					data: {
						"account": account
					},
					success: function(result) {
						if(result.status) {
							var html = template("tpl-user", result.data);
							$("#infoBox").html(html);
							$(".sex select").val(result.data.sex);
							//启动下拉
							$('.sex select').selected();
							//启动日期插件
							$('.choosebir').datepicker();
						}

					}
				});

			})
		</script>

	</body>

</html>